import { PIXQRCode } from '../src'
import { PIXStaticElements } from '../src/types/PIXElements'

const brCode =
  '00020126510014br.gov.bcb.pix0115thalesog@me.com0210Pedido 123520400005303986540510.005802BR5914Thales Ogliari6002SC62070503***6304E5AB'

it('should be able to parse a static qrcode data', () => {
  const {
    type,
    transactionAmount,
    merchantCity,
    merchantName,
    countryCode,
    txid,
    chave,
    infoAdicional,
    transactionCurrency,
    oneTime,
  } = PIXQRCode.parseCode(brCode, {
    encoding: 'utf8',
  }).extractElements() as PIXStaticElements

  expect(type).toBe('static')
  expect(chave).toBe('thalesog@me.com')
  expect(transactionAmount).toBe(10.0)
  expect(merchantCity).toBe('SC')
  expect(merchantName).toBe('Thales Ogliari')
  expect(countryCode).toBe('BR')
  expect(infoAdicional).toBe('Pedido 123')
  expect(transactionCurrency).toBe(986)
  expect(oneTime).toBe(false)
  expect(txid).toBe('***')
})

it('should be able to create a image from EMV code', async () => {
  const imgReturn = await PIXQRCode.getImage(brCode)

  expect(imgReturn).toBe(
    'data:image/png;base64,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'
  )
})

// it('should be able to create a base64 image from EMV code', async () => {
//   // TODO: Fix test
//   const imgReturn = await PIXQRCode.getBase64Image(brCode)

//   expect(true).toBe(true)
// })
