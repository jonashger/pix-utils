{"version":3,"file":"pix-utils.cjs.development.js","sources":["../src/types/PIXPayload.ts","../node_modules/regenerator-runtime/runtime.js","../src/payload/fetchPayload.ts","../src/emv-merchant-qrcode/emv-qrcode-tags.ts","../src/utils/data-utils.ts","../src/emv-merchant-qrcode/element-scheme.ts","../src/emv-merchant-qrcode/crc.ts","../src/utils/rule-validator.ts","../src/emv-merchant-qrcode/qrcode-validator.ts","../src/emv-merchant-qrcode/qrcode-node.ts","../src/emv-merchant-qrcode/emv-merchant-qrcode.ts","../src/pix-qrcode-validator.ts","../src/pix-qrcode.ts"],"sourcesContent":["export type PIXPayload = {\n  revisao: number\n  calendario: {\n    criacao: string\n    apresentacao: string\n    expiracao?: number\n    vencimento?: string\n    diasAposVencimento?: number\n  }\n  devedor?: {\n    cpf?: string\n    cnpj?: string\n    nome?: string\n  }\n  valor: {\n    original?: string\n    final?: string\n    juros?: string\n    multa?: string\n    desconto?: string\n    abatimento?: string\n    modalidadeAlteracao: number\n  }\n  chave: string\n  txid: string\n  solicitacaoPagador?: string\n  infoAdicionais: {\n    nome: string\n    valor: string\n  }[]\n  status: string\n}\n\nexport const PayloadExample: PIXPayload = {\n  txid: 'fc9a4366-ff3d-4964-b5db-c6c91a8722d3',\n  revisao: 3,\n  calendario: {\n    criacao: '2020-09-15T19:39:54.013Z',\n    apresentacao: '2020-04-01T18:00:00Z',\n    expiracao: 3600,\n  },\n  status: 'ATIVA',\n\n  valor: {\n    original: '500.00',\n    final: '500.00',\n    modalidadeAlteracao: 0,\n  },\n\n  chave: '7407c9c8-f78b-11ea-adc1-0242ac120002',\n\n  solicitacaoPagador: 'Informar cart√£o fidelidade',\n\n  infoAdicionais: [{ nome: 'quantidade', valor: '2' }],\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import { Buffer } from 'buffer'\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\nimport { PIXPayload } from '../types/PIXPayload'\n\nexport type PIXFetchResults = {\n  jwsString: string\n  jws: {\n    hdr: Uint8Array\n    payload: Uint8Array\n    signature: Uint8Array\n  }\n  header: any\n  payload: PIXPayload\n}\n\nexport default async function fetchPayload(url: string): Promise<PIXFetchResults> {\n  const axiosOptions: AxiosRequestConfig = {\n    headers: {\n      //accept: 'x/y',\n      //mode: 'no-cors',\n    },\n  }\n  return axios\n    .get('https://' + url, axiosOptions)\n    .then(({ data, status }: AxiosResponse) => {\n      if (status !== 200) throw new Error('HTTP ' + status)\n      return data\n    })\n    .then((jws: string) => {\n      const parts = jws.split('.').map((b64) => Buffer.from(b64, 'base64'))\n      const pixFetch: PIXFetchResults = {\n        jwsString: jws,\n        jws: {\n          hdr: parts[0],\n          payload: parts[1],\n          signature: parts[2],\n        },\n        header: JSON.parse(parts[0].toString()),\n        payload: JSON.parse(parts[1].toString()) as PIXPayload,\n      }\n      return pixFetch\n    })\n    .catch((error) => {\n      console.log(error)\n      throw error\n    })\n}\n","export enum EMVQR {\n  TAG_INIT = 0,\n  TAG_CRC = 63,\n  TAG_MAX = 99,\n  TAG_ONETIME_PAYMENT = 2, // TODO: Alter name\n  TAG_MCC = 52,\n  TAG_TRANSACTION_CURRENCY = 53,\n  TAG_TRANSACTION_AMOUNT = 54,\n  TAG_COUNTRY_CODE = 58,\n  TAG_MERCHANT_NAME = 59,\n  TAG_MERCHANT_CITY = 60,\n  MAI_STANDARD_FIRST = 2,\n  MAI_TEMPLATE_FIRST = 26,\n  MAI_TEMPLATE_LAST = 51,\n  TAG_TEMPLATE_GUI = 0,\n  TAG_ADDITIONAL_DATA = 62,\n  TAG_AD_REF_LABEL = 5,\n}\n","export function stringToHex(str: string): string {\n  let returnString = ''\n  for (let i = 0; i < str.length; i++) {\n    returnString += '' + str.charCodeAt(i).toString(16)\n  }\n  return returnString\n}\n\nexport function numToHex(n: number, digits?: number): string {\n  const hex = n.toString(16).toUpperCase()\n  if (digits) {\n    return ('0'.repeat(digits) + hex).slice(-digits)\n  }\n  return hex.length % 2 === 0 ? hex : '0' + hex\n}\n\nexport function valueIn<type>(setof: type[], value: type): boolean {\n  return setof.indexOf(value) >= 0\n}\n","import { DataSchemaElement } from '../utils/data-schema-element'\nimport { EMVQR } from '../emv-merchant-qrcode/emv-qrcode-tags'\nimport { QRCodeNode } from '../emv-merchant-qrcode/qrcode-node'\n\nexport interface QRSchemaElement extends DataSchemaElement {\n  lastTag?: number\n  elementMap?: QRElementSchemaMap\n  identifiedElementMap?: Record<string, QRElementSchemaMap>\n}\n\nexport type QRElementSchemaMap = Record<number, QRSchemaElement>\n\nconst paymentSystemSpecificTemplateMap = {\n  0: {\n    name: 'Globally Unique Identifier',\n    length: { max: 32 },\n    optional: true,\n  },\n  1: {\n    lastTag: 99,\n    name: 'Payment System specific',\n    optional: true,\n  },\n}\n\nconst reservedTemplateMap = {\n  0: {\n    name: 'Globally Unique Identifier',\n    length: { max: 32 },\n    optional: true,\n  },\n  1: {\n    lastTag: 99,\n    name: 'Context specific data',\n    optional: true,\n  },\n}\n\nconst additionalDataFieldMap: QRElementSchemaMap = {\n  1: {\n    name: 'Bill Number',\n    length: { max: 25 },\n    optional: true,\n  },\n  2: {\n    name: 'Mobile Number',\n    length: { max: 25 },\n    optional: true,\n  },\n  3: {\n    name: 'Store Label',\n    length: { max: 25 },\n    optional: true,\n  },\n  4: {\n    name: 'Loyalty Number',\n    length: { max: 25 },\n    optional: true,\n  },\n  5: {\n    name: 'Reference Label',\n    length: { max: 25 },\n    optional: true,\n  },\n  6: {\n    name: 'Customer Label',\n    length: { max: 25 },\n    optional: true,\n  },\n  7: {\n    name: 'Terminal Label',\n    length: { max: 25 },\n    optional: true,\n  },\n  8: {\n    name: 'Purpose of Transaction',\n    length: { max: 25 },\n    optional: true,\n  },\n  9: {\n    name: 'Additional Consumer Data Request',\n    length: { max: 25 },\n    optional: true,\n  },\n  10: {\n    lastTag: 49,\n    name: 'RFU for EMVCo',\n    optional: true,\n  },\n  50: {\n    lastTag: 99,\n    name: 'Payment System specific template',\n    optional: true,\n    elementMap: paymentSystemSpecificTemplateMap,\n  },\n}\n\nconst merchantInformationLanguageTemplateMap = {\n  0: {\n    name: 'Language Preference',\n    optional: true,\n  },\n  1: {\n    name: 'Merchant Name - Alternate Language',\n    optional: true,\n  },\n  3: {\n    name: 'Merchant City - Alternate Language',\n    optional: true,\n  },\n}\n\nconst rootSchemaMap: QRElementSchemaMap = {\n  0: {\n    name: 'Payload Format Indicator',\n    length: 2,\n    pattern: /^01$/,\n  },\n  1: {\n    name: 'Point of Initiation Method',\n    optional: true,\n    length: 2,\n    pattern: /^1[12]$/,\n  },\n  2: {\n    lastTag: 25,\n    name: 'Merchant Account Information',\n    length: { max: 99 },\n  },\n  26: {\n    lastTag: 51,\n    name: 'Merchant Account Information',\n    elementMap: paymentSystemSpecificTemplateMap,\n  },\n  52: {\n    name: 'Merchant Category Code',\n    length: 4,\n    pattern: /^\\d*$/,\n  },\n  53: {\n    name: 'Transaction Currency',\n    length: 3,\n    pattern: /^\\d*$/,\n  },\n  54: {\n    name: 'Transaction Amount',\n    length: { max: 13 },\n    pattern: /^[\\d]+(.\\d\\d)?$/,\n  },\n  55: {\n    name: 'Tip or Convenience Indicator',\n    length: 2,\n    optional: true,\n  },\n  56: {\n    name: 'Value of Convenience Fee Fixed',\n    length: { max: 13 },\n    pattern: /^[\\d]+(.\\d\\d)?$/,\n    //    presence: 'C',\n  },\n  57: {\n    name: 'Value of Convenience Fee Percentage',\n    //    presence: 'C',\n  },\n  58: {\n    name: 'Country Code',\n    length: 2,\n  },\n  59: {\n    name: 'Merchant Name',\n    length: { max: 25 },\n  },\n  60: {\n    name: 'Merchant City',\n  },\n  61: {\n    name: 'Postal Code',\n    optional: true,\n  },\n  62: {\n    name: 'Additional Data Field Template',\n    optional: true,\n    elementMap: additionalDataFieldMap,\n  },\n  63: {\n    name: 'CRC',\n    pattern: /^[A-Fa-f\\d]*$/,\n  },\n  64: {\n    name: 'Merchant Information ‚Äî Language Template',\n    optional: true,\n    elementMap: merchantInformationLanguageTemplateMap,\n  },\n  65: {\n    lastTag: 79,\n    name: 'RFU for EMVCo',\n    optional: true,\n  },\n  80: {\n    lastTag: 99,\n    name: 'Unreserved Templates',\n    optional: true,\n    elementMap: reservedTemplateMap,\n  },\n}\n\nexport const rootEMVSchema = {\n  name: 'root',\n  elementMap: rootSchemaMap,\n}\n\nexport function lookupNodeSchema(\n  schema: QRSchemaElement,\n  node: QRCodeNode,\n  tag: number\n): QRSchemaElement {\n  let elementMap = schema?.elementMap\n\n  if (schema?.identifiedElementMap) {\n    if (node.hasElement(EMVQR.TAG_TEMPLATE_GUI)) {\n      const gui = node.getElement(EMVQR.TAG_TEMPLATE_GUI).content.toUpperCase()\n      // TODO: Replace with map()\n      for (const xx in schema.identifiedElementMap) {\n        if (xx.toUpperCase() === gui) {\n          elementMap = {\n            ...elementMap,\n            ...schema.identifiedElementMap[xx],\n          }\n        }\n      }\n    }\n  }\n\n  let nodeSchema: QRSchemaElement = { name: 'Unknown', elementMap: {} }\n\n  if (elementMap?.[tag]) {\n    nodeSchema = elementMap[tag]\n  } else {\n    // Not found ..\n    for (const xx in elementMap) {\n      const elTag = parseInt(xx)\n      const el = elementMap[elTag]\n\n      if (tag >= elTag && el.lastTag && tag <= el.lastTag) {\n        nodeSchema = el\n      }\n    }\n  }\n\n  return nodeSchema\n}\n","import { numToHex } from '../utils/data-utils'\n\nexport function computeCRC(str: string, invert = false): string {\n  const bytes = new TextEncoder().encode(str)\n\n  const crcTable = [\n    0x0000, 0x1021, 0x2042, 0x3063, 0x4084, 0x50a5, 0x60c6, 0x70e7, 0x8108, 0x9129, 0xa14a, 0xb16b,\n    0xc18c, 0xd1ad, 0xe1ce, 0xf1ef, 0x1231, 0x0210, 0x3273, 0x2252, 0x52b5, 0x4294, 0x72f7, 0x62d6,\n    0x9339, 0x8318, 0xb37b, 0xa35a, 0xd3bd, 0xc39c, 0xf3ff, 0xe3de, 0x2462, 0x3443, 0x0420, 0x1401,\n    0x64e6, 0x74c7, 0x44a4, 0x5485, 0xa56a, 0xb54b, 0x8528, 0x9509, 0xe5ee, 0xf5cf, 0xc5ac, 0xd58d,\n    0x3653, 0x2672, 0x1611, 0x0630, 0x76d7, 0x66f6, 0x5695, 0x46b4, 0xb75b, 0xa77a, 0x9719, 0x8738,\n    0xf7df, 0xe7fe, 0xd79d, 0xc7bc, 0x48c4, 0x58e5, 0x6886, 0x78a7, 0x0840, 0x1861, 0x2802, 0x3823,\n    0xc9cc, 0xd9ed, 0xe98e, 0xf9af, 0x8948, 0x9969, 0xa90a, 0xb92b, 0x5af5, 0x4ad4, 0x7ab7, 0x6a96,\n    0x1a71, 0x0a50, 0x3a33, 0x2a12, 0xdbfd, 0xcbdc, 0xfbbf, 0xeb9e, 0x9b79, 0x8b58, 0xbb3b, 0xab1a,\n    0x6ca6, 0x7c87, 0x4ce4, 0x5cc5, 0x2c22, 0x3c03, 0x0c60, 0x1c41, 0xedae, 0xfd8f, 0xcdec, 0xddcd,\n    0xad2a, 0xbd0b, 0x8d68, 0x9d49, 0x7e97, 0x6eb6, 0x5ed5, 0x4ef4, 0x3e13, 0x2e32, 0x1e51, 0x0e70,\n    0xff9f, 0xefbe, 0xdfdd, 0xcffc, 0xbf1b, 0xaf3a, 0x9f59, 0x8f78, 0x9188, 0x81a9, 0xb1ca, 0xa1eb,\n    0xd10c, 0xc12d, 0xf14e, 0xe16f, 0x1080, 0x00a1, 0x30c2, 0x20e3, 0x5004, 0x4025, 0x7046, 0x6067,\n    0x83b9, 0x9398, 0xa3fb, 0xb3da, 0xc33d, 0xd31c, 0xe37f, 0xf35e, 0x02b1, 0x1290, 0x22f3, 0x32d2,\n    0x4235, 0x5214, 0x6277, 0x7256, 0xb5ea, 0xa5cb, 0x95a8, 0x8589, 0xf56e, 0xe54f, 0xd52c, 0xc50d,\n    0x34e2, 0x24c3, 0x14a0, 0x0481, 0x7466, 0x6447, 0x5424, 0x4405, 0xa7db, 0xb7fa, 0x8799, 0x97b8,\n    0xe75f, 0xf77e, 0xc71d, 0xd73c, 0x26d3, 0x36f2, 0x0691, 0x16b0, 0x6657, 0x7676, 0x4615, 0x5634,\n    0xd94c, 0xc96d, 0xf90e, 0xe92f, 0x99c8, 0x89e9, 0xb98a, 0xa9ab, 0x5844, 0x4865, 0x7806, 0x6827,\n    0x18c0, 0x08e1, 0x3882, 0x28a3, 0xcb7d, 0xdb5c, 0xeb3f, 0xfb1e, 0x8bf9, 0x9bd8, 0xabbb, 0xbb9a,\n    0x4a75, 0x5a54, 0x6a37, 0x7a16, 0x0af1, 0x1ad0, 0x2ab3, 0x3a92, 0xfd2e, 0xed0f, 0xdd6c, 0xcd4d,\n    0xbdaa, 0xad8b, 0x9de8, 0x8dc9, 0x7c26, 0x6c07, 0x5c64, 0x4c45, 0x3ca2, 0x2c83, 0x1ce0, 0x0cc1,\n    0xef1f, 0xff3e, 0xcf5d, 0xdf7c, 0xaf9b, 0xbfba, 0x8fd9, 0x9ff8, 0x6e17, 0x7e36, 0x4e55, 0x5e74,\n    0x2e93, 0x3eb2, 0x0ed1, 0x1ef0,\n  ]\n\n  let crc = 0xffff\n\n  for (let i = 0; i < bytes.length; i++) {\n    const c = bytes[i]\n    const j = (c ^ (crc >> 8)) & 0xff\n\n    crc = crcTable[j] ^ (crc << 8)\n  }\n\n  const answer = (crc ^ 0) & 0xffff\n\n  const hex = numToHex(answer, 4)\n\n  if (invert) return hex.slice(2) + hex.slice(0, 2)\n\n  return hex\n}\n","export type xValidationRule<CTX> = (\n  context: CTX,\n  v: RuleValidator<CTX>\n) => void | ValidationResult | Promise<ValidationResult>\n\nexport interface RuleDescription<CTX> {\n  id: string\n  description?: string\n  when?: (context: CTX, v: RuleValidator<CTX>) => boolean | Promise<boolean>\n  rule?: (\n    context: CTX,\n    v: RuleValidator<CTX>\n  ) => void | ValidationResult | Promise<ValidationResult>\n}\n\nexport class ValidationError<EC = any> extends Error {\n  errorName = ''\n\n  constructor(public errorCode: EC, message?: string) {\n    super(message)\n  }\n}\n\nexport type ValidationResult = {\n  status: 'none' | 'not-applicable' | 'running' | 'pass' | 'inconclusive' | 'fail'\n\n  error?: ValidationError\n}\n\nexport type ValidationObserver = (v: RuleValidator<any>, result: ValidationResult) => void\n\nexport class RuleValidator<CTX> {\n  public ruleInfo: RuleDescription<CTX>\n  parent?: RuleValidator<CTX>\n  protected childValidators: RuleValidator<CTX>[] = []\n\n  constructor(ruleInfo: RuleDescription<CTX>) {\n    this.ruleInfo = ruleInfo\n  }\n\n  static get<CTX>(info: RuleDescription<CTX>): RuleValidator<CTX> {\n    const v = new RuleValidator<CTX>(info)\n\n    return v\n  }\n\n  addRule(info: RuleDescription<CTX>): this {\n    return this.addValidator(RuleValidator.get(info))\n  }\n\n  addValidator(rule: RuleValidator<CTX>): this {\n    rule.parent = this\n\n    this.childValidators.push(rule)\n\n    return this\n  }\n\n  result: ValidationResult = {\n    status: 'none',\n  }\n\n  protected handleResult(\n    res: ValidationResult,\n    observer?: ValidationObserver,\n    isFinal = false\n  ): ValidationResult {\n    const previousStatus = this.result.status\n\n    switch (res.status) {\n      case 'none':\n      case 'not-applicable':\n      case 'running':\n        this.result = res\n        break\n\n      case 'pass':\n        if (isFinal && this.result.status === 'running') {\n          this.result = res\n        }\n        break\n\n      case 'inconclusive':\n        if (this.result.status !== 'fail') {\n          this.result = res\n        }\n        break\n\n      case 'fail':\n        if (this.result.status !== 'fail') {\n          this.result = res\n        }\n        break\n    }\n\n    if (observer && previousStatus !== this.result.status) observer(this, this.result)\n\n    return this.result\n  }\n\n  protected async executeRule(context: CTX): Promise<ValidationResult> {\n    let result: ValidationResult = { status: 'pass' }\n\n    if (this.ruleInfo.rule) {\n      try {\n        const res = this.ruleInfo.rule(context, this)\n\n        if (res) {\n          result = res instanceof Promise ? await Promise.resolve<ValidationResult>(res) : res\n        }\n      } catch (E) {\n        result = {\n          status: 'fail',\n          error: E instanceof ValidationError ? E : new ValidationError(E),\n        }\n      }\n    }\n\n    return result\n  }\n\n  async validate(context: CTX, observer?: ValidationObserver): Promise<ValidationResult> {\n    this.result = { status: 'none' }\n\n    const shouldExec = !this.ruleInfo.when || this.ruleInfo.when(context, this)\n\n    if (shouldExec) {\n      // Reset result status\n      this.handleResult({ status: 'running' }, observer)\n\n      if (this.ruleInfo.rule) {\n        this.handleResult(await this.executeRule(context), observer)\n      }\n\n      for (const child of this.childValidators) {\n        if (this.result.status !== 'running') break\n\n        const childResult = await child.validate(context, observer)\n\n        // Propagate child errors to me\n        this.handleResult(childResult, observer)\n      }\n\n      if (this.result.status === 'running') this.handleResult({ status: 'pass' }, observer, true)\n    } else {\n      this.handleResult({ status: 'not-applicable' }, observer, true)\n    }\n\n    return this.result\n  }\n}\n","import { EMVQR } from '../emv-merchant-qrcode/emv-qrcode-tags'\nimport {\n  QRSchemaElement,\n  rootEMVSchema,\n  lookupNodeSchema,\n} from '../emv-merchant-qrcode/element-scheme'\nimport { QRCodeNode } from '../emv-merchant-qrcode/qrcode-node'\nimport { computeCRC } from '../emv-merchant-qrcode/crc'\nimport { RuleValidator, ValidationError } from '../utils/rule-validator'\n\nexport enum QRErrorCode {\n  INVALID_PARAM,\n  INVALID_QRCODE,\n  CRC_MISMATCH,\n  MISSING_MANDATORY_ELEMENT,\n  INVALID_ELEMENT,\n}\n\nexport class QRCodeError extends ValidationError<QRErrorCode> {\n  constructor(public errorCode: QRErrorCode, message?: string) {\n    super(errorCode, message)\n\n    this.errorName = 'EMVQR-' + QRErrorCode[errorCode]\n  }\n}\n\nconst mandatoryElements: number[] = [\n  EMVQR.TAG_INIT, // Start\n  EMVQR.TAG_MCC,\n  EMVQR.TAG_TRANSACTION_CURRENCY,\n  EMVQR.TAG_COUNTRY_CODE,\n  EMVQR.TAG_MERCHANT_NAME,\n  EMVQR.TAG_MERCHANT_CITY,\n  EMVQR.TAG_CRC, // CRC\n]\n\nfunction validateElement(val: string | undefined, schema: QRSchemaElement, path: string) {\n  //console.log( \"Validating: \" + path + `[${val}]` )\n\n  // optional?\n  if (!val) {\n    if (!schema.optional)\n      throw new QRCodeError(\n        QRErrorCode.MISSING_MANDATORY_ELEMENT,\n        `Element ${path} missing and is mandatory`\n      )\n    return\n  }\n\n  // length\n  if (schema?.length) {\n    if (schema.length instanceof Object) {\n      const lenInfo = schema.length\n\n      if (lenInfo.max && val.length > lenInfo.max)\n        throw new QRCodeError(\n          QRErrorCode.INVALID_ELEMENT,\n          `Element ${path} must have maximum length of ${lenInfo.max}`\n        )\n      if (lenInfo.min && val.length < lenInfo.min)\n        throw new QRCodeError(\n          QRErrorCode.INVALID_ELEMENT,\n          `Element ${path} must have minimum length of ${lenInfo.min}`\n        )\n    } else {\n      if (val.length !== schema.length)\n        throw new QRCodeError(\n          QRErrorCode.INVALID_ELEMENT,\n          `Element ${path} must have length of ${schema.length}`\n        )\n    }\n  }\n\n  // pattern regex\n  if (schema?.pattern) {\n    const pattern = schema.pattern instanceof RegExp ? schema.pattern : new RegExp(schema.pattern)\n\n    //console.log( `pattern /${pattern.source}/ (${val}) => ${pattern.test(val)}`)\n    if (!pattern.test(val))\n      throw new QRCodeError(QRErrorCode.INVALID_ELEMENT, `Element ${path} has invalid contents`)\n  }\n}\n\nfunction validateNode(node: QRCodeNode, schema: QRSchemaElement, path = '') {\n  //console.log( \"Validating: \" + path + `=[${node.content}]:${node.type}` )\n\n  if (node.isType('data')) {\n    validateElement(node.content, schema, path)\n  } else {\n    node.elements.forEach((element: QRCodeNode) => {\n      const nodeSchema: QRSchemaElement = lookupNodeSchema(schema, node, element.tag!)\n\n      const elementPath = path + (path.length ? ':' : '') + ('00' + element.tag!).slice(-2)\n\n      validateNode(element, nodeSchema, elementPath)\n    })\n  }\n}\n\nexport function getRuleValidator(): RuleValidator<QRCodeNode> {\n  return RuleValidator.get<QRCodeNode>({ id: 'EMVQR' })\n    .addRule({\n      id: 'start-element-00',\n      description: \"Initial element is '00' with contents '01'\",\n      rule: (root) => {\n        if (root.getElement(0).baseOffset !== 0) {\n          throw new QRCodeError(QRErrorCode.INVALID_QRCODE, 'Missing start element (00)')\n        }\n\n        if (root.getElement(0).content !== '01') {\n          throw new QRCodeError(QRErrorCode.INVALID_QRCODE, 'Invalid value for start element (00)')\n        }\n      },\n    })\n    .addRule({\n      id: 'final-element-63',\n      description: \"Final element is CRC '63'\",\n      rule: (root) => {\n        const crcEl = root.getElement(EMVQR.TAG_CRC)\n\n        if (crcEl.baseOffset !== root.content.length - 8 || root.content.slice(-8, -4) !== '6304') {\n          throw new QRCodeError(QRErrorCode.INVALID_QRCODE, 'CRC must be final element (63)')\n        }\n      },\n    })\n    .addRule({\n      id: 'valid-crc',\n      description: 'CRC is valid',\n      rule: (root) => {\n        const crcEl = root.getElement(EMVQR.TAG_CRC)\n\n        // 3. CRC Correct\n        const calculatedCRC = computeCRC(root.content.slice(0, -4))\n        if (calculatedCRC !== crcEl.content) {\n          throw new QRCodeError(QRErrorCode.CRC_MISMATCH, 'Invalid CRC')\n        }\n      },\n    })\n    .addRule({\n      id: 'one-or-more-mai',\n      description: 'Contains one or more Merchant Account Information elements',\n      rule: (root) => {\n        const maiList = Array.from(root.elements.keys()).filter((v) => v >= 2 && v <= 51)\n\n        if (maiList.length === 0) {\n          throw new QRCodeError(\n            QRErrorCode.MISSING_MANDATORY_ELEMENT,\n            'Must have at least one Merchant Account Information'\n          )\n        }\n      },\n    })\n    .addRule({\n      id: 'mandatory-elements',\n      description: 'Contains EMV mandatory elements',\n      rule: (root) => {\n        mandatoryElements.forEach((tag) => {\n          if (!root.hasElement(tag as number))\n            throw new QRCodeError(\n              QRErrorCode.MISSING_MANDATORY_ELEMENT,\n              'Missing mandatory tag (' + tag + ')'\n            )\n        })\n      },\n    })\n    .addRule({\n      id: 'valid-elements',\n      description: 'Elements are valid',\n      rule: (root) => {\n        validateNode(root, rootEMVSchema)\n      },\n    })\n}\n","import { valueIn } from '../utils/data-utils'\nimport { EMVQR } from '../emv-merchant-qrcode/emv-qrcode-tags'\nimport { QRCodeError, QRErrorCode } from '../emv-merchant-qrcode/qrcode-validator'\n\ntype QRElementMap = Map<number, QRCodeNode>\n\ntype QRNodeType = 'root' | 'data' | 'template' | 'identified-template' | 'void'\n\nexport class QRCodeNode {\n  type: QRNodeType\n  content: string\n  baseOffset: number\n  elements: QRElementMap\n\n  isType(type: QRNodeType): boolean {\n    return this.type === type\n  }\n  isTemplate(): boolean {\n    return this.isType('template') || this.isType('identified-template')\n  }\n\n  readonly tag?: number\n\n  constructor(type: QRNodeType, content: string, tag?: number, baseOffset = 0) {\n    this.type = type\n    this.baseOffset = baseOffset\n    this.content = content\n    switch (type) {\n      case 'root':\n      case 'template':\n        this.elements = this.parseElementSequence(content, baseOffset)\n        break\n\n      default:\n        this.elements = new Map()\n    }\n    if (!tag) return\n    this.tag = tag\n  }\n\n  parseElementSequence(sequence: string, baseOffset = 0): QRElementMap {\n    const elements: QRElementMap = new Map()\n    const end = sequence.length\n\n    let index = 0\n    while (index + 4 < end) {\n      const pos = baseOffset + index\n      if (!/^\\d{4}$/.test(sequence.substr(index, 4))) {\n        throw new QRCodeError(\n          QRErrorCode.INVALID_QRCODE,\n          'Error parsing qrcode string: invalid tag or length characters @ ' + (1 + pos)\n        )\n      }\n\n      const tag = parseInt(sequence.substr(index, 2))\n      const len = parseInt(sequence.substr(index + 2, 2))\n\n      if (index + len + 4 > end) {\n        throw new QRCodeError(\n          QRErrorCode.INVALID_QRCODE,\n          'Error parsing qrcode string: invalid length @' + (1 + pos)\n        )\n      }\n\n      const content = sequence.substr(index + 2 + 2, len)\n\n      elements.set(tag, new QRCodeNode('data', content, tag, pos))\n\n      index += 4 + len\n    }\n\n    if (index !== end) {\n      throw new QRCodeError(\n        QRErrorCode.INVALID_QRCODE,\n        'Error parsing qrcode string: extra characters at end @' + (1 + baseOffset + index)\n      )\n    }\n\n    return elements\n  }\n\n  parseAsTemplate(isIdentified: boolean): this {\n    if (!this.isTemplate()) {\n      this.elements = this.parseElementSequence(this.content, this.baseOffset)\n      this.type = isIdentified ? 'identified-template' : 'template'\n    }\n\n    return this\n  }\n\n  hasElement(tag: number): boolean {\n    return this.elements.has(tag)\n  }\n\n  getElement(tag: number): QRCodeNode {\n    if (!this.elements.has(tag)) return new QRCodeNode('void', '', tag)\n\n    return this.elements.get(tag)!\n  }\n\n  newDataElement(tag: number, content: string): QRCodeNode {\n    const node = new QRCodeNode('data', content, tag)\n\n    this.elements.set(tag, node)\n\n    return node\n  }\n\n  newTemplateElement(\n    tag: number,\n    lastTag?: number,\n    isIdentified = false,\n    nodes?: QRCodeNode[]\n  ): QRCodeNode {\n    if (!lastTag) lastTag = tag\n\n    while (tag <= lastTag) {\n      if (!this.hasElement(tag)) {\n        const node = new QRCodeNode(isIdentified ? 'identified-template' : 'template', '', tag)\n\n        if (nodes) {\n          for (const child of nodes) node.elements.set(child.tag!, child)\n        }\n\n        this.elements.set(tag, node)\n\n        return node\n      }\n\n      ++tag\n    }\n\n    throw new QRCodeError(QRErrorCode.INVALID_ELEMENT, 'Unable to insert template')\n  }\n\n  deleteElement(tag: number): void {\n    this.elements.delete(tag)\n  }\n\n  toJSON(): any {\n    const json = {\n      type: this.type,\n      tag: this.tag ?? undefined,\n      content: this.content,\n      elements: !this.isType('data')\n        ? Array.from(this.elements.values()).map((value: QRCodeNode) => value.toJSON())\n        : undefined,\n    }\n\n    return json\n  }\n\n  ensureDataElement(tag: number, defaultContent = ''): QRCodeNode {\n    return this.hasElement(tag) ? this.getElement(tag) : this.newDataElement(tag, defaultContent)\n  }\n\n  private buildTagLength(): string {\n    const ts = ('00' + this.tag!.toString()).slice(-2)\n\n    const len = ('00' + this.content.length.toString()).slice(-2)\n\n    return ts + len\n  }\n\n  buildQRString(offset = 0): string {\n    const isRoot = this.isType('root')\n\n    if (isRoot) {\n      console.log(this.elements)\n      // TODO: Reorder elements by tag\n      // this.elements = new Map(\n      //   this.elements.sort((a, b) => (a[0] > b[0] ? 1 : -1))\n      // );\n    }\n\n    this.baseOffset = offset\n\n    if (!isRoot) offset += 2 + 2\n\n    // rebuild content from children\n    if (!this.isType('data')) {\n      const qrs: string[] = []\n\n      this.elements.forEach((element) => {\n        if (!isRoot || !valueIn([EMVQR.TAG_INIT, EMVQR.TAG_CRC], element.tag)) {\n          const els = element.buildQRString(offset)\n\n          qrs.push(els)\n\n          offset += els.length\n        }\n      })\n\n      this.content = qrs.join('')\n    }\n\n    return !isRoot ? this.buildTagLength() + this.content : this.content\n  }\n\n  findIdentifiedTemplate(id: string, first = 0, last: number = EMVQR.TAG_MAX): QRCodeNode[] {\n    const found: QRCodeNode[] = []\n\n    this.elements.forEach((element) => {\n      if (\n        element.isType('identified-template') &&\n        element.tag! >= first &&\n        element.tag! <= last &&\n        element.hasElement(EMVQR.TAG_TEMPLATE_GUI) &&\n        element.getElement(EMVQR.TAG_TEMPLATE_GUI).content.toUpperCase() === id.toUpperCase()\n      ) {\n        found.push(element)\n      }\n    })\n\n    return found\n  }\n}\n","import { EMVQR } from '../emv-merchant-qrcode/emv-qrcode-tags'\nimport { QRCodeNode } from '../emv-merchant-qrcode/qrcode-node'\nimport { getRuleValidator } from '../emv-merchant-qrcode/qrcode-validator'\nimport { computeCRC } from '../emv-merchant-qrcode/crc'\nimport { QRCodeError, QRErrorCode } from '../emv-merchant-qrcode/qrcode-validator'\nimport { QRSchemaElement } from '../emv-merchant-qrcode/element-scheme'\nimport { ValidationObserver, ValidationResult } from '../utils/rule-validator'\nimport { EMVQRCodeBasicElements } from '../types/PIXElements'\n\ntype EMVEncoding = 'utf8' | 'base64'\n\nexport interface EMVMerchantQRParams {\n  encoding?: EMVEncoding\n}\n\nconst defaultParams: EMVMerchantQRParams = {\n  encoding: 'utf8',\n}\n\nconst convertCode = (qrCode = '', encoding: EMVEncoding = 'utf8'): string => {\n  switch (encoding) {\n    case 'utf8':\n      return qrCode\n\n    case 'base64': {\n      const u8 = Buffer.from(qrCode, 'base64')\n      return new TextDecoder().decode(u8)\n    }\n\n    default:\n      throw new QRCodeError(QRErrorCode.INVALID_PARAM, \"encoding must be 'utf8' or 'base64'\")\n  }\n}\n\nexport class EMVMerchantQRCode extends QRCodeNode {\n  type: 'root' = 'root'\n\n  protected constructor(qrCode: string, params: EMVMerchantQRParams) {\n    super('root', convertCode(qrCode, params.encoding))\n  }\n\n  static createCode(basicElements?: EMVQRCodeBasicElements): EMVMerchantQRCode {\n    const root = new EMVMerchantQRCode('', { encoding: 'utf8' })\n    if (basicElements) {\n      root.newDataElement(EMVQR.TAG_MCC, basicElements.merchantCategoryCode)\n\n      root.newDataElement(\n        EMVQR.TAG_TRANSACTION_CURRENCY,\n        ('000' + basicElements.transactionCurrency).slice(-3)\n      )\n\n      root.newDataElement(EMVQR.TAG_COUNTRY_CODE, basicElements.countryCode)\n      root.newDataElement(EMVQR.TAG_MERCHANT_NAME, basicElements.merchantName)\n      root.newDataElement(EMVQR.TAG_MERCHANT_CITY, basicElements.merchantCity)\n      if (basicElements.oneTime) root.newDataElement(EMVQR.TAG_ONETIME_PAYMENT, '12')\n      if (basicElements.transactionAmount)\n        root.newDataElement(\n          EMVQR.TAG_TRANSACTION_AMOUNT,\n          basicElements.transactionAmount.toFixed(2)\n        )\n    }\n\n    return root\n  }\n\n  static parseCode(qrCode: string, params?: EMVMerchantQRParams): EMVMerchantQRCode {\n    params = {\n      ...defaultParams,\n      ...params,\n    }\n\n    const root = new EMVMerchantQRCode(qrCode, params)\n\n    function toTemplate(node: QRCodeNode, isIdentified: boolean, tag: number, lastTag?: number) {\n      for (let index = tag; index <= (lastTag ?? tag); ++index) {\n        if (node.hasElement(index)) node.getElement(index).parseAsTemplate(isIdentified)\n      }\n    }\n\n    // process MAI 26..51\n    toTemplate(root, true, EMVQR.MAI_TEMPLATE_FIRST, EMVQR.MAI_TEMPLATE_LAST)\n\n    // EL62 Additional Data Field Template\n    if (root.hasElement(EMVQR.TAG_ADDITIONAL_DATA)) {\n      toTemplate(root, false, EMVQR.TAG_ADDITIONAL_DATA)\n\n      // Payment system specific .. child 50.99\n      toTemplate(root.getElement(EMVQR.TAG_ADDITIONAL_DATA), true, 50, 99)\n    }\n\n    // EL64 = Language stuff\n    toTemplate(root, false, 64)\n\n    // EL80-99 =\n    toTemplate(root, true, 80, 99)\n\n    return root\n  }\n  getDataElement(tag: number): string {\n    if (this.hasElement(tag)) {\n      return this.getElement(tag).content\n    }\n    return ''\n  }\n  extractElements(): EMVQRCodeBasicElements {\n    const basicElements: EMVQRCodeBasicElements = {\n      merchantCategoryCode: this.getDataElement(EMVQR.TAG_MCC),\n      transactionCurrency: Number(+this.getDataElement(EMVQR.TAG_TRANSACTION_CURRENCY)),\n      countryCode: this.getDataElement(EMVQR.TAG_COUNTRY_CODE),\n      merchantName: this.getDataElement(EMVQR.TAG_MERCHANT_NAME),\n      merchantCity: this.getDataElement(EMVQR.TAG_MERCHANT_CITY),\n      transactionAmount: Number(+this.getDataElement(EMVQR.TAG_TRANSACTION_AMOUNT)),\n      oneTime: this.getDataElement(EMVQR.TAG_ONETIME_PAYMENT) === '12',\n    }\n\n    return basicElements\n  }\n\n  /*\n   * Validate QR code by EMV Rules\n   */\n  async validateCode(observer?: ValidationObserver): Promise<ValidationResult> {\n    return getRuleValidator().validate(this, observer)\n  }\n\n  /*\n   * Rebuild string from QR Node structure, calculating correct CRC\n   */\n  buildQRString(): string {\n    let content = this.content\n\n    // \"00\" - first element in QR string\n    content = this.ensureDataElement(0, '01').buildQRString()\n\n    // build rest (-00,-63) .. passing correct offset\n    content += super.buildQRString(content.length)\n\n    // Recalculate CRC - tag \"63\" - last element in QR string\n\n    // reset CRC with correct length and concat tag+length\n    content += this.newDataElement(EMVQR.TAG_CRC, '0000').buildQRString(content.length).slice(0, -4)\n\n    // Recalculate CRC .. upto to and including tag+length of \"63\"\n    const crc = computeCRC(content)\n    this.getElement(EMVQR.TAG_CRC).content = crc\n\n    // reset content\n    this.baseOffset = 0\n    this.content = content = content + crc\n\n    return content\n  }\n  dumpNode(node: QRCodeNode = this, schema: QRSchemaElement, indent: string): string {\n    let result = ''\n\n    if (node.isType('data')) {\n      result += `${indent} ${('00' + node.tag).slice(-2)} (${schema.name})\\n`\n      result += `${indent} ${node.content}\\n`\n    } else {\n      if (!node.isType('root')) {\n        result += indent + '(' + ('00' + node.tag).slice(-2) + '): ' + schema.name + '\\n'\n\n        indent += '  '\n      }\n\n      node.elements.forEach((element: QRCodeNode) => {\n        const nodeSchema: QRSchemaElement = schema?.elementMap?.[element.tag!] ?? {\n          name: 'unknown',\n          elementMap: {},\n        }\n        result += this.dumpNode(element, nodeSchema, indent)\n      })\n    }\n\n    return result\n  }\n}\n","import { RuleValidator, ValidationError } from './utils/rule-validator'\nimport { PIXQRCode, PIX } from './pix-qrcode'\n\nexport enum PIXQRErrorCode {\n  OK,\n  INVALID_QRCODE,\n  CRC_MISMATCH,\n  MISSING_MANDATORY_ELEMENT,\n  MISSING_PIX_MAI,\n  PIX_MAI_INVALID,\n  DUPLICATE_PIX_MAI,\n}\n\nexport class PIXQRCodeError extends ValidationError<PIXQRErrorCode> {\n  constructor(public errorCode: PIXQRErrorCode, message?: string) {\n    super(errorCode, message)\n\n    this.errorName = 'PIXQR-' + PIXQRErrorCode[errorCode]\n  }\n}\n\nfunction addStaticRules(v: RuleValidator<PIXQRCode>) {\n  v.addRule({\n    id: 'pix-static-txid',\n    when: (pix: any) => pix.isPIX('static'),\n    description: 'Contains a PIX Merchant Account Information',\n    rule: () => {\n      // Nothing Here\n    },\n  })\n}\n\nfunction addDynamicRules(v: RuleValidator<PIXQRCode>) {\n  v.addRule({\n    id: 'pix-dynamic-txid',\n    when: (pix: any) => pix.isPIX('dynamic'),\n    description: 'Correct URL coded in dynamic PIX',\n    rule: (pix: any) => {\n      const url = pix.getMAI().getElement(PIX.TAG_MAI_URL)\n\n      if (url && url.content.startsWith('http'))\n        throw new PIXQRCodeError(\n          PIXQRErrorCode.PIX_MAI_INVALID,\n          'URL must not contain protocol (https://)'\n        )\n    },\n  })\n}\n\nexport function getRuleValidator(): RuleValidator<PIXQRCode> {\n  const v = RuleValidator.get<PIXQRCode>({ id: 'PIXQR' })\n    .addRule({\n      id: 'pix-mai',\n      description: 'Contains a PIX Merchant Account Information',\n      rule: (pix: any) => {\n        const maiList = pix.emvQRCode.findIdentifiedTemplate(PIX.GUI, 26, 51)\n\n        if (maiList.length === 0) {\n          throw new PIXQRCodeError(PIXQRErrorCode.MISSING_PIX_MAI, 'PIX MAI not found')\n        }\n\n        if (maiList.length > 1) {\n          throw new PIXQRCodeError(PIXQRErrorCode.DUPLICATE_PIX_MAI, 'PIX MAI duplicated')\n        }\n      },\n    })\n    .addRule({\n      id: 'pix-static-or-dynamic',\n      description: 'Contains a PIX Merchant Account Information',\n      rule: (pix: any) => {\n        const pixMAI = pix.getMAI()\n\n        // 3. PIX-MAI contents must indicate CHAVE or URL\n        const pixStatic = pixMAI.hasElement(PIX.TAG_MAI_CHAVE)\n\n        if (pixStatic) {\n          if (pixMAI.hasElement(PIX.TAG_MAI_URL)) {\n            throw new PIXQRCodeError(\n              PIXQRErrorCode.PIX_MAI_INVALID,\n              'PIX MAI contains both CHAVE and URL elements'\n            )\n          }\n        } else {\n          // must be dynamic\n          if (!pixMAI.hasElement(PIX.TAG_MAI_URL)) {\n            throw new PIXQRCodeError(\n              PIXQRErrorCode.PIX_MAI_INVALID,\n              'PIX MAI contains neither static or dynamic elements'\n            )\n          }\n        }\n      },\n    })\n\n  addStaticRules(v)\n  addDynamicRules(v)\n\n  return v\n}\n","import fetchPayload, { PIXFetchResults } from './payload/fetchPayload'\nimport { ValidationObserver, ValidationResult } from './utils/rule-validator'\nimport { EMVMerchantQRCode, EMVMerchantQRParams } from './emv-merchant-qrcode/emv-merchant-qrcode'\nimport { EMVQR } from './emv-merchant-qrcode/emv-qrcode-tags'\nimport { QRCodeNode } from './emv-merchant-qrcode/qrcode-node'\nimport { getRuleValidator, PIXQRCodeError, PIXQRErrorCode } from './pix-qrcode-validator'\nimport { PIXQRCodeElements } from './types/PIXElements'\n\nexport class PIX {\n  static GUI = 'br.gov.bcb.pix'\n  static TAG_MAI_CHAVE = 1\n  static TAG_MAI_INFO_ADD = 2\n  static TAG_MAI_URL = 25\n}\n\nexport class PIXQRCode {\n  protected emvQRCode: EMVMerchantQRCode\n\n  protected constructor(emvQRCode: EMVMerchantQRCode) {\n    this.emvQRCode = emvQRCode\n  }\n\n  getMAI(): QRCodeNode {\n    const maiList = this.emvQRCode.findIdentifiedTemplate(\n      PIX.GUI,\n      EMVQR.MAI_TEMPLATE_FIRST,\n      EMVQR.MAI_TEMPLATE_LAST\n    )\n\n    return maiList[0]\n  }\n\n  static createCode(elements: PIXQRCodeElements): PIXQRCode {\n    const pixQRCode = new PIXQRCode(EMVMerchantQRCode.createCode(elements))\n    const emvQRCode = pixQRCode.emvQRCode\n    const guiNode = new QRCodeNode('data', PIX.GUI, EMVQR.TAG_TEMPLATE_GUI)\n\n    const maiPIX = emvQRCode.newTemplateElement(\n      EMVQR.MAI_TEMPLATE_FIRST,\n      EMVQR.MAI_TEMPLATE_LAST,\n      true,\n      [guiNode]\n    )\n\n    if (elements.type === 'static') {\n      if (elements.chave) maiPIX.newDataElement(PIX.TAG_MAI_CHAVE, elements.chave)\n\n      if (elements.infoAdicional)\n        maiPIX.newDataElement(PIX.TAG_MAI_INFO_ADD, elements.infoAdicional)\n\n      if (elements.txid) {\n        const el62 = emvQRCode.newTemplateElement(EMVQR.TAG_ADDITIONAL_DATA)\n        el62.newDataElement(EMVQR.TAG_AD_REF_LABEL, elements.txid)\n      }\n    } else {\n      if (elements.url) maiPIX.newDataElement(PIX.TAG_MAI_URL, elements.url)\n    }\n\n    return pixQRCode\n  }\n\n  static parseCode(qrCode: string, params?: EMVMerchantQRParams): PIXQRCode {\n    return new PIXQRCode(EMVMerchantQRCode.parseCode(qrCode, params))\n  }\n\n  public async validateCode(observer?: ValidationObserver): Promise<ValidationResult> {\n    return await getRuleValidator().validate(this, observer)\n  }\n\n  isPIX(test: 'pix' | 'valid' | 'static' | 'dynamic'): boolean {\n    const pixMAI = this.getMAI()\n    if (!pixMAI) return false\n\n    const isStatic = pixMAI.hasElement(PIX.TAG_MAI_CHAVE)\n    const isDynamic = pixMAI.hasElement(PIX.TAG_MAI_URL)\n\n    switch (test) {\n      case 'pix':\n        return true\n      case 'valid':\n        return isStatic || isDynamic\n      case 'static':\n        return isStatic\n      case 'dynamic':\n        return isDynamic\n      default:\n        return false\n    }\n  }\n\n  extractElements(): PIXQRCodeElements {\n    const emvQR = this.emvQRCode\n    const basicElements = emvQR.extractElements()\n\n    if (this.isPIX('static')) {\n      return {\n        type: 'static',\n        ...basicElements,\n        chave: this.getMAI()?.getElement(PIX.TAG_MAI_CHAVE).content,\n        infoAdicional: this.getMAI()?.getElement(PIX.TAG_MAI_INFO_ADD).content,\n        txid: emvQR.getElement(EMVQR.TAG_ADDITIONAL_DATA)?.getElement(EMVQR.TAG_AD_REF_LABEL)\n          ?.content,\n      }\n    } else if (this.isPIX('dynamic')) {\n      return {\n        type: 'dynamic',\n        ...basicElements,\n        url: this.getMAI()?.getElement(PIX.TAG_MAI_URL).content,\n      }\n    }\n\n    throw new PIXQRCodeError(\n      PIXQRErrorCode.INVALID_QRCODE,\n      'Unable to extract static/dynamic elements'\n    )\n  }\n\n  async getPayloadData(): Promise<PIXFetchResults | false> {\n    if (this.isPIX('dynamic')) {\n      return await fetchPayload(this.getMAI()?.getElement(PIX.TAG_MAI_URL).content)\n    }\n    throw new PIXQRCodeError(\n      PIXQRErrorCode.MISSING_MANDATORY_ELEMENT,\n      'You can only get payload data from dynamic '\n    )\n  }\n}\n"],"names":["PayloadExample","txid","revisao","calendario","criacao","apresentacao","expiracao","status","valor","original","modalidadeAlteracao","chave","solicitacaoPagador","infoAdicionais","nome","undefined","fetchPayload","url","axiosOptions","headers","axios","get","then","data","Error","jws","parts","split","map","b64","Buffer","from","pixFetch","jwsString","hdr","payload","signature","header","JSON","parse","toString","error","console","log","EMVQR","numToHex","n","digits","hex","toUpperCase","repeat","slice","length","valueIn","setof","value","indexOf","paymentSystemSpecificTemplateMap","name","max","optional","lastTag","reservedTemplateMap","additionalDataFieldMap","elementMap","merchantInformationLanguageTemplateMap","rootSchemaMap","pattern","rootEMVSchema","lookupNodeSchema","schema","node","tag","identifiedElementMap","hasElement","TAG_TEMPLATE_GUI","gui","getElement","content","xx","nodeSchema","elTag","parseInt","el","computeCRC","str","invert","bytes","TextEncoder","encode","crcTable","crc","i","c","j","answer","ValidationError","errorCode","message","RuleValidator","ruleInfo","info","v","addRule","addValidator","rule","parent","childValidators","push","handleResult","res","observer","isFinal","previousStatus","result","executeRule","context","Promise","resolve","validate","shouldExec","when","child","childResult","QRErrorCode","QRCodeError","errorName","mandatoryElements","TAG_INIT","TAG_MCC","TAG_TRANSACTION_CURRENCY","TAG_COUNTRY_CODE","TAG_MERCHANT_NAME","TAG_MERCHANT_CITY","TAG_CRC","validateElement","val","path","MISSING_MANDATORY_ELEMENT","Object","lenInfo","INVALID_ELEMENT","min","RegExp","test","validateNode","isType","elements","forEach","element","elementPath","getRuleValidator","id","description","root","baseOffset","INVALID_QRCODE","crcEl","calculatedCRC","CRC_MISMATCH","maiList","Array","keys","filter","QRCodeNode","type","parseElementSequence","Map","isTemplate","sequence","end","index","pos","substr","len","set","parseAsTemplate","isIdentified","has","newDataElement","newTemplateElement","nodes","deleteElement","toJSON","json","values","ensureDataElement","defaultContent","buildTagLength","ts","buildQRString","offset","isRoot","qrs","els","join","findIdentifiedTemplate","first","last","TAG_MAX","found","defaultParams","encoding","convertCode","qrCode","u8","TextDecoder","decode","INVALID_PARAM","EMVMerchantQRCode","params","createCode","basicElements","merchantCategoryCode","transactionCurrency","countryCode","merchantName","merchantCity","oneTime","TAG_ONETIME_PAYMENT","transactionAmount","TAG_TRANSACTION_AMOUNT","toFixed","parseCode","toTemplate","MAI_TEMPLATE_FIRST","MAI_TEMPLATE_LAST","TAG_ADDITIONAL_DATA","getDataElement","extractElements","Number","validateCode","dumpNode","indent","PIXQRErrorCode","PIXQRCodeError","addStaticRules","pix","isPIX","addDynamicRules","getMAI","PIX","TAG_MAI_URL","startsWith","PIX_MAI_INVALID","emvQRCode","GUI","MISSING_PIX_MAI","DUPLICATE_PIX_MAI","pixMAI","pixStatic","TAG_MAI_CHAVE","PIXQRCode","pixQRCode","guiNode","maiPIX","infoAdicional","TAG_MAI_INFO_ADD","el62","TAG_AD_REF_LABEL","isStatic","isDynamic","emvQR","getPayloadData"],"mappings":"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"}